<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenNSL API Guide and Reference Manual: Building OpenNSL</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenNSL API Guide and Reference Manual
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Welcome</span></a></li>
      <li class="current"><a href="../../pages.html"><span>OpenNSL&#160;Documentation</span></a></li>
      <li><a href="../../modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Building OpenNSL </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The sections below provide the build instructions for building OpenNSL. The SDK is also built as part of the OpenNSL make process.</p>
<h1><a class="anchor" id="OPENNSL_PLATFORMS"></a>
Supported Platforms</h1>
<h2><a class="anchor" id="OPENNSL_IM"></a>
Interface Masters Niagra 2948-6XL switch - x86/Trident+</h2>
<p>For Interface Masters switch, OpenNSL can be compiled on the IM switch OR using offline UBUNTU build server. The boot loader, kernel headers, toolchain are assumed to be pre-installed on the Switch/Server.</p>
<ul>
<li>Toolchain: /usr/lib/gcc/x86_64-linux-gnu/4.6/cc1 (Pre-installed) </li>
<li>Kernel headers: /usr/src/linux-headers-3.2.0-23-generic (Pre-installed) </li>
<li>Bootloader: GNU GRUB (Pre-installed) </li>
<li>Kernel version: Linux version 3.2.0-23-generic (Pre-installed) </li>
<li>Root file system: Pre-installed on IM switch</li>
</ul>
<h2><a class="anchor" id="OPENNSL_BRCM"></a>
Broadcom Reference Platforms (SVK) - GTO/Trident+/Trident2</h2>
<p>For Broadcom reference platforms, the bootloader, kernel headers, VMLINUX, root file system are provided with OpenNSL package.</p>
<ul>
<li>Toolchain: CROSS_COMPILE must be set (example - GCC 4.6.2 powerpc) </li>
<li>Kernel headers: Located at 'os/cpu/gto/brl_2.0/kernel' </li>
<li>Bootloader: Broadcom CFE located at 'os/cpu/gto/linux/system/cfe.flash.bcm98548xmc' </li>
<li>Kernel version: Linux version 2.6.34.6. VMLINUX located at 'os/cpu/gto/brl_2.0/kernel/vmlinux' </li>
<li>Root file system: Pre-compiled binaries provided with OpenNSL package (busybox)</li>
</ul>
<h2><a class="anchor" id="OPENNSL_WEDGE"></a>
Wedge Network Switch Platform - Trident2</h2>
<p>For Wedge Network Switch platform, OpenNSL can be compiled on the Wedge switch OR using offline CentOS build server. The boot loader, kernel headers, toolchain are assumed to be pre-installed on the Switch/Server.</p>
<ul>
<li>Toolchain: /usr/lib/gcc/x86_64-linux-gnu/4.6/cc1 (Pre-installed) </li>
<li>Kernel headers: /usr/src/kernels/2.6.32-431.el6.x86_64 (Pre-installed) </li>
<li>Bootloader: ONIE (Pre-installed) </li>
<li>Kernel version: Linux version 2.6.32-generic (Pre-installed) </li>
<li>Root file system: Pre-installed on Wedge switch</li>
</ul>
<h1><a class="anchor" id="OPENNSL_BUILD_VARIABLES"></a>
Build Variables</h1>
<p>The environment variables documented in tools/Make.common control building OpenNSL. They are set in the Makefile in the platform output directory.</p>
<h1><a class="anchor" id="OPENNSL_APP_BUILDING"></a>
Build Process</h1>
<p>Change to the platform subdirectory (e.g. output/gto-trident) and type "make". This will generate the following binaries in directory specified by DELIVERABLES_DIR. The default setting for DELIVERABLES_DIR is output/&lt;platform&gt;/build/ as defined in Make.common.</p>
<ul>
<li><b>libopennsl.so.1</b>: the shared library. </li>
<li><b>linux-kernel-bde.ko,linux-user-bde.ko</b>: kernel objects used by the SDK.</li>
</ul>
<p>Note: OpenNSL requires MAKE version 3.82. MAKE version 4.0 is not supported. To force the MAKE version, set the following variable. "export MAKEVER=3.82"</p>
<p>Use the following commands to clean the builds</p>
<ul>
<li>make clean: deletes the contents of all the subdirectories of output/&lt;platform&gt; except sdk </li>
<li>make clean-all: deletes the contents of all the subdirectories of output/&lt;platform&gt; including sdk</li>
</ul>
<p>Use the following command to generate a binary image containing GTO kernel and root file system.</p>
<ul>
<li>make kernel </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 6 2015 11:11:32 for OpenNSL API Guide and Reference Manual by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
